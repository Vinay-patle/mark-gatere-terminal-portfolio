document.addEventListener('DOMContentLoaded', function() {
    const terminalOutput = document.getElementById('terminal-output');
    const terminalInput = document.getElementById('terminal-input');
    const cursor = document.getElementById('cursor');
    const timestamp = document.getElementById('timestamp');
    const commandItems = document.querySelectorAll('.command-item');
    
    let commandHistory = [];
    let historyIndex = -1;
    let isProcessing = false;

    // Initialize terminal
    function initTerminal() {
        updateTimestamp();
        setInterval(updateTimestamp, 1000);
        
        // Display welcome message
        displayWelcomeMessage();
        
        // Focus input
        terminalInput.focus();
        
        // Add click handlers for command bar
        commandItems.forEach(item => {
            item.addEventListener('click', function() {
                const command = this.textContent;
                terminalInput.value = command;
                executeCommand(command);
            });
        });
    }

    function displayWelcomeMessage() {
        const welcomeText = `gatere@portfolio:~$ welcome

Hi, I'm Mark Gatere, a Software & AI Engineer.

Welcome to my interactive 'AI powered' portfolio terminal!
Type 'help' to see available commands.

gatere@portfolio:~$ `;
        
        appendOutput(welcomeText, 'output-text');
    }

    function updateTimestamp() {
        const now = new Date();
        const timeString = now.toLocaleDateString() + ', ' + now.toLocaleTimeString();
        timestamp.textContent = timeString;
    }

    function appendOutput(text, className = 'output-text') {
        const outputDiv = document.createElement('div');
        outputDiv.className = `output-line ${className} fade-in`;
        outputDiv.textContent = text;
        terminalOutput.appendChild(outputDiv);
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }

    function executeCommand(command) {
        if (isProcessing) return;
        
        const cmd = command.trim().toLowerCase();
        if (!cmd) return;

        isProcessing = true;
        
        // Echo command
        appendOutput(`gatere@portfolio:~$ ${command}`, 'command-echo');
        
        // Add to history
        if (commandHistory[commandHistory.length - 1] !== command) {
            commandHistory.push(command);
        }
        historyIndex = commandHistory.length;

        // Process command
        setTimeout(() => {
            processCommand(cmd);
            isProcessing = false;
            terminalInput.value = '';
        }, 100);
    }

    function processCommand(cmd) {
        switch (cmd) {
            case 'help':
                showHelp();
                break;
            case 'about':
                showAbout();
                break;
            case 'projects':
                showProjects();
                break;
            case 'skills':
                showSkills();
                break;
            case 'experience':
                showExperience();
                break;
            case 'contact':
                showContact();
                break;
            case 'education':
                showEducation();
                break;
            case 'certifications':
                showCertifications();
                break;
            case 'leadership':
                showLeadership();
                break;
            case 'sudo':
                showSudo();
                break;
            case 'clear':
                clearTerminal();
                break;
            case 'welcome':
                displayWelcomeMessage();
                break;
            default:
                showError(cmd);
        }
        
        // Add prompt for next command
        setTimeout(() => {
            appendOutput('gatere@portfolio:~$ ', 'command-echo');
        }, 200);
    }

    function showHelp() {
        const helpText = `Available commands:

help          - Show this help message
about         - Learn more about me
projects      - View my projects
skills        - See my technical skills
experience    - View my work experience
contact       - Get my contact information
education     - See my educational background
certifications- View my certifications
leadership    - See my leadership experience
sudo          - Restricted access
clear         - Clear the terminal
welcome       - Show welcome message

Type any command to get started!`;
        
        appendOutput(helpText, 'output-text');
    }

    function showAbout() {
        const aboutText = `About Mark Gatere
================

Hi! I'm Mark Gatere, a passionate Software & AI Engineer with expertise in 
building innovative solutions and interactive systems.

I specialize in:
‚Ä¢ Full-stack web development
‚Ä¢ Artificial Intelligence and Machine Learning
‚Ä¢ Interactive user interfaces
‚Ä¢ Modern web technologies

I love creating engaging digital experiences that combine technical excellence
with creative design. This interactive terminal portfolio is just one example
of how I like to push the boundaries of traditional web interfaces.

When I'm not coding, you can find me exploring new technologies, contributing
to open-source projects, or sharing knowledge with the developer community.`;
        
        appendOutput(aboutText, 'output-text');
    }

    function showProjects() {
        const projectsText = `My Projects
===========

üöÄ Interactive Terminal Portfolio
   A unique portfolio website built as an interactive terminal interface
   Technologies: HTML5, CSS3, JavaScript, 3D CSS transforms

ü§ñ AI-Powered Chat Interface
   Intelligent chatbot with natural language processing capabilities
   Technologies: Python, TensorFlow, React, Node.js

üåê Full-Stack Web Applications
   Various web applications with modern architectures
   Technologies: React, Node.js, MongoDB, Express

üì± Mobile-First Responsive Designs
   Mobile-optimized applications with seamless user experiences
   Technologies: React Native, Flutter, Progressive Web Apps

üîß Open Source Contributions
   Active contributor to various open-source projects
   Focus: Developer tools, UI libraries, AI frameworks

For more details about specific projects, feel free to contact me!`;
        
        appendOutput(projectsText, 'output-text');
    }

    function showSkills() {
        const skillsText = `Technical Skills
===============

Programming Languages:
‚Ä¢ JavaScript (ES6+)     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ Python               ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ TypeScript           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%
‚Ä¢ Java                 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     80%
‚Ä¢ C++                  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       70%

Frontend Technologies:
‚Ä¢ React/Next.js        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ HTML5/CSS3           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ Vue.js               ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%
‚Ä¢ Angular              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     80%

Backend Technologies:
‚Ä¢ Node.js              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ Express.js           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ Django/Flask         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%
‚Ä¢ MongoDB/PostgreSQL   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%

AI/ML Technologies:
‚Ä¢ TensorFlow           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%
‚Ä¢ PyTorch              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     80%
‚Ä¢ Scikit-learn         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%
‚Ä¢ Natural Language Processing  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 75%

Tools & Platforms:
‚Ä¢ Git/GitHub           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚Ä¢ Docker               ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%
‚Ä¢ AWS/Cloud Services   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà     80%
‚Ä¢ Linux/Unix           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   90%`;
        
        appendOutput(skillsText, 'output-text');
    }

    function showExperience() {
        const experienceText = `Work Experience
===============

Senior Software & AI Engineer | TechCorp Inc.
2022 - Present
‚Ä¢ Led development of AI-powered applications serving 100K+ users
‚Ä¢ Architected scalable microservices using Node.js and Python
‚Ä¢ Implemented machine learning models for predictive analytics
‚Ä¢ Mentored junior developers and conducted code reviews

Full-Stack Developer | InnovateLab
2020 - 2022
‚Ä¢ Developed responsive web applications using React and Node.js
‚Ä¢ Collaborated with UX/UI designers to create intuitive interfaces
‚Ä¢ Optimized application performance resulting in 40% faster load times
‚Ä¢ Integrated third-party APIs and payment processing systems

Software Developer | StartupXYZ
2019 - 2020
‚Ä¢ Built MVP products from concept to deployment
‚Ä¢ Worked in agile environment with rapid iteration cycles
‚Ä¢ Developed mobile-first applications with React Native
‚Ä¢ Participated in product planning and technical decision making

Freelance Developer
2018 - 2019
‚Ä¢ Delivered custom web solutions for various clients
‚Ä¢ Specialized in e-commerce and business automation tools
‚Ä¢ Managed full project lifecycle from requirements to deployment
‚Ä¢ Built long-term client relationships through quality delivery`;
        
        appendOutput(experienceText, 'output-text');
    }

    function showContact() {
        const contactText = `Contact Information
==================

üìß Email: mark.gatere@example.com
üåê Website: https://gateremark.me
üíº LinkedIn: linkedin.com/in/markgatere
üêô GitHub: github.com/markgatere
üê¶ Twitter: @markgatere

üìç Location: Available for remote work worldwide
üïí Timezone: UTC+3 (EAT)

üí¨ Preferred contact method: Email
‚ö° Response time: Usually within 24 hours

Feel free to reach out for:
‚Ä¢ Collaboration opportunities
‚Ä¢ Technical discussions
‚Ä¢ Project consultations
‚Ä¢ Speaking engagements
‚Ä¢ Open source contributions

I'm always excited to connect with fellow developers and discuss
innovative projects!`;
        
        appendOutput(contactText, 'output-text');
    }

    function showEducation() {
        const educationText = `Education
=========

üéì Master of Science in Computer Science
   University of Technology | 2018 - 2020
   Specialization: Artificial Intelligence & Machine Learning
   GPA: 3.8/4.0
   
   Relevant Coursework:
   ‚Ä¢ Advanced Algorithms and Data Structures
   ‚Ä¢ Machine Learning and Neural Networks
   ‚Ä¢ Computer Vision and Image Processing
   ‚Ä¢ Natural Language Processing
   ‚Ä¢ Distributed Systems

üéì Bachelor of Science in Software Engineering
   Tech University | 2014 - 2018
   Magna Cum Laude
   GPA: 3.7/4.0
   
   Relevant Coursework:
   ‚Ä¢ Software Design and Architecture
   ‚Ä¢ Database Systems
   ‚Ä¢ Web Development
   ‚Ä¢ Mobile Application Development
   ‚Ä¢ Software Testing and Quality Assurance

üìö Continuous Learning:
   ‚Ä¢ Online courses in emerging technologies
   ‚Ä¢ Regular attendance at tech conferences
   ‚Ä¢ Active participation in developer communities
   ‚Ä¢ Self-directed learning in AI/ML advancements`;
        
        appendOutput(educationText, 'output-text');
    }

    function showCertifications() {
        const certificationsText = `Certifications
==============

üèÜ AWS Certified Solutions Architect - Professional
   Amazon Web Services | 2023
   Credential ID: AWS-PSA-2023-MG001

üèÜ Google Cloud Professional Developer
   Google Cloud Platform | 2022
   Credential ID: GCP-PD-2022-MG002

üèÜ Microsoft Azure AI Engineer Associate
   Microsoft | 2022
   Credential ID: AZ-AI-2022-MG003

üèÜ TensorFlow Developer Certificate
   TensorFlow | 2021
   Credential ID: TF-DEV-2021-MG004

üèÜ Certified Kubernetes Administrator (CKA)
   Cloud Native Computing Foundation | 2021
   Credential ID: CKA-2021-MG005

üèÜ MongoDB Certified Developer
   MongoDB University | 2020
   Credential ID: MDB-DEV-2020-MG006

üèÜ React Developer Certification
   Meta (Facebook) | 2020
   Credential ID: META-REACT-2020-MG007

üìà Continuous Certification:
   I regularly update my certifications to stay current with
   evolving technologies and industry best practices.`;
        
        appendOutput(certificationsText, 'output-text');
    }

    function showLeadership() {
        const leadershipText = `Leadership Experience
===================

üë• Technical Team Lead | TechCorp Inc.
   2022 - Present
   ‚Ä¢ Leading a team of 8 developers across multiple projects
   ‚Ä¢ Established coding standards and development workflows
   ‚Ä¢ Implemented agile methodologies improving delivery by 30%
   ‚Ä¢ Conducted technical interviews and onboarding processes

üéØ Project Manager | InnovateLab
   2021 - 2022
   ‚Ä¢ Managed cross-functional teams of 12+ members
   ‚Ä¢ Coordinated product launches with marketing and sales teams
   ‚Ä¢ Implemented project tracking systems and KPI dashboards
   ‚Ä¢ Successfully delivered 15+ projects on time and within budget

üåü Open Source Maintainer
   2020 - Present
   ‚Ä¢ Maintaining popular JavaScript libraries with 10K+ stars
   ‚Ä¢ Managing community contributions and code reviews
   ‚Ä¢ Organizing virtual meetups and coding workshops
   ‚Ä¢ Mentoring new contributors to open source projects

üé§ Conference Speaker & Workshop Leader
   2019 - Present
   ‚Ä¢ Delivered 20+ technical talks at conferences and meetups
   ‚Ä¢ Conducted workshops on modern web development
   ‚Ä¢ Created educational content reaching 50K+ developers
   ‚Ä¢ Organized local developer community events

üèÜ Achievements:
   ‚Ä¢ "Outstanding Leadership Award" - TechCorp Inc. (2023)
   ‚Ä¢ "Community Builder of the Year" - DevCommunity (2022)
   ‚Ä¢ "Innovation Champion" - InnovateLab (2021)`;
        
        appendOutput(leadershipText, 'output-text');
    }

    function showSudo() {
        const sudoText = `[sudo] password for gatere: 

Sorry, access denied. You don't have administrative privileges on this system.

This is a read-only portfolio terminal. For administrative access or 
collaboration opportunities, please use the 'contact' command to get in touch!

üîí Security note: This terminal is for demonstration purposes only.
    No actual system access is provided through this interface.`;
        
        appendOutput(sudoText, 'error-text');
    }

    function clearTerminal() {
        terminalOutput.innerHTML = '';
    }

    function showError(cmd) {
        const errorText = `Command not found: ${cmd}

Type 'help' to see available commands.

Did you mean one of these?
‚Ä¢ help     - Show available commands
‚Ä¢ about    - Learn more about me
‚Ä¢ projects - View my projects
‚Ä¢ contact  - Get contact information`;
        
        appendOutput(errorText, 'error-text');
    }

    // Event listeners
    terminalInput.addEventListener('keydown', function(e) {
        if (isProcessing) {
            e.preventDefault();
            return;
        }

        if (e.key === 'Enter') {
            e.preventDefault();
            const command = this.value.trim();
            if (command) {
                executeCommand(command);
            }
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (historyIndex > 0) {
                historyIndex--;
                this.value = commandHistory[historyIndex];
            }
        } else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
                historyIndex++;
                this.value = commandHistory[historyIndex];
            } else {
                historyIndex = commandHistory.length;
                this.value = '';
            }
        } else if (e.key === 'Tab') {
            e.preventDefault();
            // Simple tab completion
            const input = this.value.toLowerCase();
            const commands = ['help', 'about', 'projects', 'skills', 'experience', 'contact', 'education', 'certifications', 'leadership', 'sudo', 'clear', 'welcome'];
            const matches = commands.filter(cmd => cmd.startsWith(input));
            if (matches.length === 1) {
                this.value = matches[0];
            }
        }
    });

    // Keep input focused
    document.addEventListener('click', function() {
        terminalInput.focus();
    });

    // Prevent context menu
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });

    // Initialize
    initTerminal();
});
